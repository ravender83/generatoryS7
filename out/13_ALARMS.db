DATA_BLOCK "A-ALARMS"
TITLE = ALARMS
{ S7_Optimized_Access := 'TRUE' }
AUTHOR : PiotrSlezak
FAMILY : Vorster
VERSION : 0.1
NON_RETAIN
//Blok zawierajacy dane alarmowe, komunikaty diagnostyczne wyswietlane na HMI
   VAR 
      error : Bool;
      VALVES : Struct
	  error : Bool;
err0 : UInt;

      END_STRUCT;
      SENSORS : Struct
	  error : Bool;
sen0 : UInt;
sen1 : UInt;

"A-sen_scanner_left" { S7_SetPoint := 'False'} : "Tsensor";   // [I1.3] A-sen_skaner_lewo
"A-sen_scanner_right" { S7_SetPoint := 'False'} : "Tsensor";   // [I1.4] A-sen_skaner_prawo
"GN-sen_frame_screw_left" { S7_SetPoint := 'False'} : "Tsensor";   // [I10.0] GN-sen_stelaz_sruba_lewa
"GN-sen_frame_screw_right" { S7_SetPoint := 'False'} : "Tsensor";   // [I11.0] GN-sen_stelaz_sruba_prawa
"GN-sen_generator_screw" { S7_SetPoint := 'False'} : "Tsensor";   // [I10.3] GN-sen_generator_sruba
"OETIKER_position_hp" { S7_SetPoint := 'False'} : "Tsensor";   // [I20.0] OETIKER_pozycja_hp
"OETIKER_position_2mm" { S7_SetPoint := 'False'} : "Tsensor";   // [I10.2] OETIKER_pozycja_2mm
"OETIKER_position_4mm" { S7_SetPoint := 'False'} : "Tsensor";   // [I11.2] OETIKER_pozycja_4mm
"OETIKER_position_tensometer" { S7_SetPoint := 'False'} : "Tsensor";   // [I11.3] OETIKER_pozycja_tensometr
"OETIKER_position_band_left_hp" { S7_SetPoint := 'False'} : "Tsensor";   // [I20.1] OETIKER_pozycja_opaska_lewa_hp
"OETIKER_position_band_right_hp" { S7_SetPoint := 'False'} : "Tsensor";   // [I21.1] OETIKER_pozycja_opaska_prawa_hp
"OETIKER_position_band_left_wp" { S7_SetPoint := 'False'} : "Tsensor";   // [I20.2] OETIKER_pozycja_opaska_lewa_wp
"OETIKER_position_band_right_wp" { S7_SetPoint := 'False'} : "Tsensor";   // [I21.2] OETIKER_pozycja_opaska_prawa_wp
"ST1-sen_latch_left" { S7_SetPoint := 'False'} : "Tsensor";   // [I20.3] ST1-sen_zasuwka_lewo
"ST1-sen_latch_right" { S7_SetPoint := 'False'} : "Tsensor";   // [I21.3] ST1-sen_zasuwka_prawo

      END_STRUCT;
      SAFETY : Struct
		 error : Bool;
sft0 : UInt;

"SAFETY_pressure_ok" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.1] SAFETY_cisnienie_ok
"SAFETY_blockade" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.4] SAFETY_blokada
"SAFETY_estop_ok" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.5] SAFETY_estop_ok

      END_STRUCT;
      BUTTONS : Struct
		 error : Bool;
btn0 : UInt;

"A-btn_start" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.0] A-btn_start
"A-btn_panel_green" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.6] A-btn_panel_zielony
"A-btn_panel_red" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.7] A-btn_panel_czerwony
"A-btn_start_on_grip" { S7_SetPoint := 'False'} : "Tsensor";   // [I1.2] A-btn_start_na_uchwycie
		 
      END_STRUCT;	  
      DRIVES : Struct
		error : Bool;
drv0 : UInt;

      END_STRUCT;
      OTHER : Struct
		error : Bool;
		oth0 : UInt;
      END_STRUCT;
      diagin_ctrn : Struct
         screen : Int;
         max : Int;
         b0 : Int;
         b1 : Int;
         b2 : Int;
         b3 : Int;
         b4 : Int;
         b5 : Int;
         b6 : Int;
         b7 : Int;
      END_STRUCT;
      diagin : Array[0..6] of SInt;
      diagout_ctrn : Struct
         screen : Int;
         max : Int;
         b0 : Int;
         b1 : Int;
         b2 : Int;
         b3 : Int;
         b4 : Int;
         b5 : Int;
         b6 : Int;
         b7 : Int;
      END_STRUCT;
      diagout : Array[0..6] of SInt;	  
   END_VAR


BEGIN
   diagin_ctrn.screen := 0;
   diagin_ctrn.max := 0;
   diagin_ctrn.b0 := 1;
   diagin_ctrn.b1 := 2;
   diagin_ctrn.b2 := 3;
   diagin_ctrn.b3 := 4;
   diagin_ctrn.b4 := 5;
   diagin_ctrn.b5 := 6;
   diagin_ctrn.b6 := 7;
   diagin_ctrn.b7 := 8;
   diagout_ctrn.screen := 0;   
   diagout_ctrn.max := 0;
   diagout_ctrn.b0 := 1;
   diagout_ctrn.b1 := 2;
   diagout_ctrn.b2 := 3;
   diagout_ctrn.b3 := 4;
   diagout_ctrn.b4 := 5;
   diagout_ctrn.b5 := 6;
   diagout_ctrn.b6 := 7;
   diagout_ctrn.b7 := 8;   
END_DATA_BLOCK

