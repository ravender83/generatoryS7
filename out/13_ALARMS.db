DATA_BLOCK "A-ALARMS"
TITLE = ALARMS
{ S7_Optimized_Access := 'TRUE' }
AUTHOR : PiotrSlezak
FAMILY : Vorster
VERSION : 0.1
NON_RETAIN
//Blok zawierajacy dane alarmowe, komunikaty diagnostyczne wyswietlane na HMI
   VAR 
      error : Bool;
      VALVES : Struct
	  error : Bool;
err0 : UInt;
err1 : UInt;
err2 : UInt;
err3 : UInt;
err4 : UInt;
err5 : UInt;
err6 : UInt;

      END_STRUCT;
      SENSORS : Struct
	  error : Bool;
sen0 : UInt;
sen1 : UInt;

"ST5-sen_bag_presence" { S7_SetPoint := 'False'} : "Tsensor";   // [I41.3] ST5-sen_obecnosc_poduszki
"ST6-sen_bag_presence" { S7_SetPoint := 'False'} : "Tsensor";   // [I171.3] ST6-sen_obecnosc_poduszki
"GN-sen_clips_presence_left" { S7_SetPoint := 'False'} : "Tsensor";   // [I50.0] GN-sen_obecnosc_klipsa_lewy
"GN-sen_clips_presence_right" { S7_SetPoint := 'False'} : "Tsensor";   // [I51.0] GN-sen_obecnosc_klipsa_prawy
"GN-sen_scanner_position_left" { S7_SetPoint := 'False'} : "Tsensor";   // [I51.4] GN-sen_pozycja_skanera_lewo
"GN-sen_scanner_position_right" { S7_SetPoint := 'False'} : "Tsensor";   // [I71.5] GN-sen_pozycja_skanera_prawo
"GN-sen_screw_presence_left" { S7_SetPoint := 'False'} : "Tsensor";   // [I50.5] GN-sen_obecnosc_sruby_lewo
"GN-sen_screw_presence_middle" { S7_SetPoint := 'False'} : "Tsensor";   // [I51.5] GN-sen_obecnosc_sruby_srodek
"GN-sen_screw_presence_right" { S7_SetPoint := 'False'} : "Tsensor";   // [I50.6] GN-sen_obecnosc_sruby_prawo
"BR-sen_bag_on_pin_01" { S7_SetPoint := 'False'} : "Tsensor";   // [I60.3] BR-sen_poduszka_na_pinie_01
"BR-sen_bag_on_pin_02" { S7_SetPoint := 'False'} : "Tsensor";   // [I61.3] BR-sen_poduszka_na_pinie_02
"BR-sen_bag_on_pin_03" { S7_SetPoint := 'False'} : "Tsensor";   // [I70.3] BR-sen_poduszka_na_pinie_03
"BR-sen_bag_on_pin_04" { S7_SetPoint := 'False'} : "Tsensor";   // [I71.3] BR-sen_poduszka_na_pinie_04

      END_STRUCT;
      SAFETY : Struct
		 error : Bool;
sft0 : UInt;

"SAFETY_pressure_ok" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.1] SAFETY_cisnienie_ok
"SAFETY_estop_pressed" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.2] SAFETY_estop_wcisniety
"SAFETY_doors_ok" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.3] SAFETY_drzwi_ok
"SAFETY_curtain_ok" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.4] SAFETY_kurtyna_ok
"SAFETY_estop_ok" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.5] SAFETY_estop_ok

      END_STRUCT;
      BUTTONS : Struct
		 error : Bool;
btn0 : UInt;

"A-btn_start" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.0] A-btn_start
"A-btn_panel_green" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.6] A-btn_panel_zielony
"A-btn_panel_red" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.7] A-btn_panel_czerwony
		 
      END_STRUCT;	  
      DRIVES : Struct
		error : Bool;
drv0 : UInt;

      END_STRUCT;
      OTHER : Struct
		error : Bool;
		oth0 : UInt;
      END_STRUCT;
      diagin_ctrn : Struct
         screen : Int;
         max : Int;
         b0 : Int;
         b1 : Int;
         b2 : Int;
         b3 : Int;
         b4 : Int;
         b5 : Int;
         b6 : Int;
         b7 : Int;
      END_STRUCT;
      diagin : Array[0..25] of SInt;
      diagout_ctrn : Struct
         screen : Int;
         max : Int;
         b0 : Int;
         b1 : Int;
         b2 : Int;
         b3 : Int;
         b4 : Int;
         b5 : Int;
         b6 : Int;
         b7 : Int;
      END_STRUCT;
      diagout : Array[0..26] of SInt;	  
   END_VAR


BEGIN
   diagin_ctrn.screen := 0;
   diagin_ctrn.max := 2;
   diagin_ctrn.b0 := 1;
   diagin_ctrn.b1 := 2;
   diagin_ctrn.b2 := 3;
   diagin_ctrn.b3 := 4;
   diagin_ctrn.b4 := 5;
   diagin_ctrn.b5 := 6;
   diagin_ctrn.b6 := 7;
   diagin_ctrn.b7 := 8;
   diagout_ctrn.screen := 0;   
   diagout_ctrn.max := 2;
   diagout_ctrn.b0 := 1;
   diagout_ctrn.b1 := 2;
   diagout_ctrn.b2 := 3;
   diagout_ctrn.b3 := 4;
   diagout_ctrn.b4 := 5;
   diagout_ctrn.b5 := 6;
   diagout_ctrn.b6 := 7;
   diagout_ctrn.b7 := 8;   
END_DATA_BLOCK

