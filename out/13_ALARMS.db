DATA_BLOCK "A-ALARMS"
TITLE = ALARMS
{ S7_Optimized_Access := 'TRUE' }
AUTHOR : PiotrSlezak
FAMILY : Vorster
VERSION : 0.1
NON_RETAIN
//Blok zawierajacy dane alarmowe, komunikaty diagnostyczne wyswietlane na HMI
   VAR 
      error : Bool;
      VALVES : Struct
	  error : Bool;
err0 : UInt;
err1 : UInt;

      END_STRUCT;
      SENSORS : Struct
	  error : Bool;
sen0 : UInt;
sen1 : UInt;
sen2 : UInt;

"ST1-sen_screw_01" { S7_SetPoint := 'False'} : "Tsensor";   // [I10.0] ST1-sen_sruba_01
"ST1-sen_screw_02" { S7_SetPoint := 'False'} : "Tsensor";   // [I11.0] ST1-sen_sruba_02
"ST1-sen_screw_03" { S7_SetPoint := 'False'} : "Tsensor";   // [I10.1] ST1-sen_sruba_03
"ST1-sen_screw_04" { S7_SetPoint := 'False'} : "Tsensor";   // [I11.1] ST1-sen_sruba_04
"STA-sen_package" { S7_SetPoint := 'False'} : "Tsensor";   // [I10.4] STA-sen_pakiet
"STB-sen_package" { S7_SetPoint := 'False'} : "Tsensor";   // [I11.4] STB-sen_pakiet
"STA-sen_plug" { S7_SetPoint := 'False'} : "Tsensor";   // [I10.5] STA-sen_wtyczka
"STB-sen_plug" { S7_SetPoint := 'False'} : "Tsensor";   // [I11.5] STB-sen_wtyczka
"ST1-sen_nest_00" { S7_SetPoint := 'False'} : "Tsensor";   // [I10.6] ST1-sen_gniazdo_00
"ST1-sen_nest_01" { S7_SetPoint := 'False'} : "Tsensor";   // [I11.6] ST1-sen_gniazdo_01
"ST1-sen_nest_02" { S7_SetPoint := 'False'} : "Tsensor";   // [I10.7] ST1-sen_gniazdo_02
"A-sen_table_00" { S7_SetPoint := 'False'} : "Tsensor";   // [I30.0] A-sen_stol_00
"A-sen_table_01" { S7_SetPoint := 'False'} : "Tsensor";   // [I31.0] A-sen_stol_01
"ST1-sen_scanner_left" { S7_SetPoint := 'False'} : "Tsensor";   // [I20.0] ST1-sen_skaner_lewo
"ST1-sen_scanner_right" { S7_SetPoint := 'False'} : "Tsensor";   // [I21.0] ST1-sen_skaner_prawo
"WEISS_on_position" { S7_SetPoint := 'False'} : "Tsensor";   // [I1.1] WEISS_na_pozycji
"WEISS_alarm" { S7_SetPoint := 'False'} : "Tsensor";   // [I1.2] WEISS_alarm
"WEISS_start_permitted" { S7_SetPoint := 'False'} : "Tsensor";   // [I1.3] WEISS_zezwolenie_na_start

      END_STRUCT;
      SAFETY : Struct
		 error : Bool;
sft0 : UInt;

"SAFETY_pressure_ok" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.1] SAFETY_cisnienie_ok
"SAFETY_phase_ok" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.2] SAFETY_faza_ok
"SAFETY_table_ok" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.3] SAFETY_stol_ok
"SAFETY_curtain_ok" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.4] SAFETY_kurtyna_ok
"SAFETY_estop_ok" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.5] SAFETY_estop_ok
"SAFETY_doors_closed" { S7_SetPoint := 'False'} : "Tsensor";   // [I1.0] SAFETY_drzwi_zamkniete

      END_STRUCT;
      BUTTONS : Struct
		 error : Bool;
btn0 : UInt;

"A-btn_start" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.0] A-btn_start
"A-btn_panel_green" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.6] A-btn_panel_zielony
"A-btn_panel_red" { S7_SetPoint := 'False'} : "Tsensor";   // [I0.7] A-btn_panel_czerwony
		 
      END_STRUCT;	  
      DRIVES : Struct
		error : Bool;
drv0 : UInt;

      END_STRUCT;
      OTHER : Struct
		error : Bool;
		oth0 : UInt;
      END_STRUCT;
      diagin_ctrn : Struct
         screen : Int;
         max : Int;
         b0 : Int;
         b1 : Int;
         b2 : Int;
         b3 : Int;
         b4 : Int;
         b5 : Int;
         b6 : Int;
         b7 : Int;
      END_STRUCT;
      diagin : Array[0..9] of SInt;
      diagout_ctrn : Struct
         screen : Int;
         max : Int;
         b0 : Int;
         b1 : Int;
         b2 : Int;
         b3 : Int;
         b4 : Int;
         b5 : Int;
         b6 : Int;
         b7 : Int;
      END_STRUCT;
      diagout : Array[0..7] of SInt;	  
   END_VAR


BEGIN
   diagin_ctrn.screen := 0;
   diagin_ctrn.max := 1;
   diagin_ctrn.b0 := 1;
   diagin_ctrn.b1 := 2;
   diagin_ctrn.b2 := 3;
   diagin_ctrn.b3 := 4;
   diagin_ctrn.b4 := 5;
   diagin_ctrn.b5 := 6;
   diagin_ctrn.b6 := 7;
   diagin_ctrn.b7 := 8;
   diagout_ctrn.screen := 0;   
   diagout_ctrn.max := 0;
   diagout_ctrn.b0 := 1;
   diagout_ctrn.b1 := 2;
   diagout_ctrn.b2 := 3;
   diagout_ctrn.b3 := 4;
   diagout_ctrn.b4 := 5;
   diagout_ctrn.b5 := 6;
   diagout_ctrn.b6 := 7;
   diagout_ctrn.b7 := 8;   
END_DATA_BLOCK

